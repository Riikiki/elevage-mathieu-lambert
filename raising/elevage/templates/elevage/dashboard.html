{% extends "base.html" %}

{% block content %}
  <div class="container">
    
    <h1 class="h1-dashboard">
      {{ elevage.nom }} - {{ elevage.utilisateur }}
    </h1>

    <div class="columns">
      <div class="info-box">
        <h2>Informations générales :</h2>
        <ul class="info-list">
          {% comment %} Trying to update along the changes but it doesn't work i want to throw myself out of the window {% endcomment %}
          {% comment %} Nevermind I found it {% endcomment %}
          {% for field, value in elevage.getFieldsAndValues.items%}
            <li><strong>{{ field }}:</strong> {{ value }}</li>
          {% endfor %}
        </ul>
      
        <h2>Individus</h2>

        <button onclick="openPopup('popupMales')">Mâles ( {{ individus_males|length }} )</button>
        <button onclick="openPopup('popupFemales')">Femelles ( {{ individus_femelles|length }} )</button>

        <div id="popupMales" class="popup">
          <div class="popup-content">
            <span class="close" onclick="closePopup('popupMales')"> X </span>
            <h3>Mâles</h3>
            <ul>
              {% for male in individus_males %}
                <li>Age : {{ male.age }} mois</li>
              {% empty %}
                <li>Aucun mâle trouvé.</li>
              {% endfor %}
            </ul>
          </div>
        </div>

        <div id="popupFemales" class="popup">
          <div class="popup-content">
            <span class="close" onclick="closePopup('popupFemales')"> X </span>
            <h3>Femelles</h3>
            <ul>
              {% for female in individus_femelles %}
                <li>Age : {{ female.age }} mois</li>
              {% empty %}
                <li>Aucun femelle trouvée.</li>
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>

      <div class="form-box">
        <h2>Actions du tour</h2>
        <form method="post">
          {% csrf_token %}
          {{ form.as_p }}
          <button type="submit">Valider le tour</button>
        </form>
      </div>

      {% if form.errors %}
        <ul class="errorlist">
          {% for field in form %}
            {% for error in field.errors %}
              <li>{{ error }}</li>
            {% endfor %}
          {% endfor %}
          {% for error in form.non_field_errors %}
            <li>{{ error }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    </div>

    <a href="{% url 'elevage_liste' %}">Retour à la liste</a>
  </div> 
{% endblock %}
